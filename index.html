<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Audio Player</title>
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/sweetalert2.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <script src="./js/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/sweetalert2.min.js"></script>
</head>

<body class="my-4">
    <div class="container width">
        <div class="playing text-center">
            <h2>Yukata Music</h2>
            <div>
                <img class="song-image mb-5" src="./img/Rikka Logo.png" width="70%" alt="" srcset="">
            </div>
            <audio id="audio" autoplay="autoplay" tabindex="0" controls="" onload="init()" controlsList="nodownload" type="audio/mpeg">
        <source type="audio/mp3" src="https://osanime.com/download/dl4/5f414b9cc43f6f65eab63c6ed677d1f0/osanime+wapkiz+com/Ano-yume-o-nazotte-(osanime.com).mp3">
            Sorry, your browser does not support HTML5 audio.
        </audio>
        </div>
        <!-- <hr> -->
        <ul id="playlist">
            <h4 class="mb-3">Playlist</h4>
            <li class="active">
                <a href="https://osanime.com/download/dl4/5f414b9cc43f6f65eab63c6ed677d1f0/osanime+wapkiz+com/Ano-yume-o-nazotte-(osanime.com).mp3">Ano-yume-o-nazotte</a>
            </li>
            <li>
                <a href="https://osanime.com/download/dl4/cf8107f5c5b50ecf8ca852d1e1534a71/osanime+wapkiz+com/Yoru-ni-kakeru-(osanime.com).mp3">Yoru-ni-kakeru</a>
            </li>
            <li>
                <a href="http://www.archive.org/download/CanonInD_261/CanoninD.mp3">Canon in D Pachabel</a>
            </li>
        </ul>
    </div>

</body>

<script>
    var audio;
    var playlist;
    var tracks;
    var current;

    function init() {
        current = 0;
        audio = $('audio');
        playlist = $('#playlist');
        tracks = playlist.find('li a');
        len = tracks.length - 1;
        audio[0].volume = 1;
        audio[0].play();
        playlist.find('a').click(function(e) {
            e.preventDefault();
            link = $(this);
            current = link.parent().index();
            run(link, audio[0]);
        });
        audio[0].addEventListener('ended', function(e) {
            current++;
            if (current == len) {
                current = 0;
                link = playlist.find('a')[0];
            } else {
                link = playlist.find('a')[current];
            }
            run($(link), audio[0]);
        });
    }

    function run(link, player) {
        player.src = link.attr('href');
        par = link.parent();
        par.addClass('active').siblings().removeClass('active');
        audio[0].load();
        audio[0].play();
    }
</script>

</html>